<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: mail | mumumu の日記]]></title>
  <link href="http://mumumu.github.io/blog/categories/mail/atom.xml" rel="self"/>
  <link href="http://mumumu.github.io/"/>
  <updated>2018-02-25T00:42:31+09:00</updated>
  <id>http://mumumu.github.io/</id>
  <author>
    <name><![CDATA[mumumu(Yoshinari Takaoka)]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[IMAP4rev1 client command]]></title>
    <link href="http://mumumu.github.io/blog/2013/05/09/imap4rev1-client-command/"/>
    <updated>2013-05-09T11:26:00+09:00</updated>
    <id>http://mumumu.github.io/blog/2013/05/09/imap4rev1-client-command</id>
    <content type="html"><![CDATA[<p><a href="http://tools.ietf.org/html/rfc3501">http://tools.ietf.org/html/rfc3501</a></p>

<p>IMAPサーバとの疎通確認のため、以下のように telnet で接続してみても login でエラーばかり返ってきて困った。</p>

<pre><code>$ telnet XXX.XXX.XXX.XXX 143
Trying XXX.XXX.XXX.XXX...
Connected to XXX.XXX.XXX.XXX (...).
Escape character is '^]'.
* OK Dovecot ready.
login username password
login BAD Error in IMAP command received by server.
</code></pre>

<p>username や password は合っているので、なんでだろうといろいろ見ていると、クライアントから送信するコマンドには必ず先頭にアルファベットか数字からなる "tag" という文字列が付くそうな。。完全に忘れていたのでここにメモしておく。</p>

<pre><code>2.2.1.  Client Protocol Sender and Server Protocol Receiver

   The client command begins an operation.  Each client command is
   prefixed with an identifier (typically a short alphanumeric string,
   e.g., A0001, A0002, etc.) called a "tag".  A different tag is
   generated by the client for each command.

   Clients MUST follow the syntax outlined in this specification
   strictly.  It is a syntax error to send a command with missing or
   extraneous spaces or arguments.
</code></pre>

<p>サーバからの応答内容は、"*" で始まる。telnet とかで確認するには、各コマンドは適当に a とか b とか付けておけば良いようだ。</p>

<pre><code>$ telnet XXX.XXX.XXX.XXX 143
Trying XXX.XXX.XXX.XXX...
Connected to XXX.XXX.XXX.XXX (...).
Escape character is '^]'.
* OK Dovecot ready.
a login username password
a OK Logged in.
b list "" *
* LIST (\NoInferiors \UnMarked) "/" "Trash"
* LIST (\NoInferiors \UnMarked) "/" "INBOX"
b OK List completed.
</code></pre>

<p>何も考えないでコマンドだけうろ覚えだとこういうことになるので気をつけましょう(´ー｀；)</p>
]]></content>
  </entry>
  
</feed>
