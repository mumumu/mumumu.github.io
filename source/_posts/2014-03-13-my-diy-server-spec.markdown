---
layout: post
title: "My DIY server spec"
date: 2014-03-13 11:59
comments: true
categories: [server]
---
このクラウド全盛の時代に、自分は自作したサーバを自宅で運用し続けている。その理由は複数あるが、以下のような感じだろうか。

**・** たとえコンシューマーレベルといえどハードウェアのトレンドは抑えておきたい  
**・** 自分の手元に置くことによるハードレベルに至るまでの自由度は捨てがたい  
**・** [自作サーバを未だに本番運用している変わった会社](http://nekoya.github.io/blog/2014/03/07/jisakuserver/) に転職して、サーバの選定やコストに関する感覚にも生かせると思いはじめた

運用やハードのコストさえ厭わなければ、はいはい頑張ってねという話に見える。コスト以外の問題点としては「CPU のトレンドが変わるたびに目移りしてしまう」点が挙げられる。自作をする人はお金が出せる範囲で最高のスペックのマシンをその時々で組みたがるのはもう病気... いやもとい本能のようなものだ。

時は移り、コンシューマー向けの Intel CPU は 第4世代になった。現在運用しているマシンの CPU は [第3世代 Intel Core i7 2600S](http://ark.intel.com/ja/products/52215/Intel-Core-i7-2600S-Processor-8M-Cache-up-to-3_80-GHz) なので、目移りに悩まされている。目移りするのはよいが、一体自分はどんなマシンを組みたいのか。そのポリシーを明らかにしなければいつまでたっても何も変わらない。そこで、現時点で組みたいサーバマシンのポリシーをここで明らかにしたいと思う。

絶対に譲れないレベルのものを挙げていくと、以下のようなものだろう。  
遊びレベルなので、たとえばお金になる商売に使いたいとかいう動機はない。基本実験用。ただし、自分や友人に必要な最低限なサーバは運用する。そんな程度だ。
予算はちなみに最大15万程度である。

### 必須

a) CPU の TDP は 65W 以下必須。  
　 - 電気代厳しい。。  
b) メモリは自分の予算が許す限り最大のものを。現状(32GB) 以上であること。  
　 - 現在、Non-ECC な DDR3 1333 なメモリ (8GBx4) を生かせれば最高。  
c) SSD もできる限り容量が大きいもの必須。  

### 任意

d) 業務レベルの遊びが出来るマザーボードであればよりよい。  
　 IPMI とか bonding

このポリシーに基づいて、転職してから半年以上目移りを続けている。最大の問題は [Atom C2000 シリーズが発表](http://pc.watch.impress.co.jp/docs/news/20130905_614086.html) になり、[TDP20W でありながらメモリが最大64GB載るコンシューマー向けのマザーボード](http://ascii.jp/elem/000/000/842/842056/) が出てきたことにある。ただし、基本 ECC なメモリが必須(Non-ECCでも動いたという報告はあるが) であり、現状のメモリを生かしたいという要求に合わないのが悩みの種であった。[Supermicro の選択肢](http://www.supermicro.com/products/motherboard/ATOM/) も非常に魅力的ではあるものの、やはり ECC が求められる。

そもそも 「32GB 以上のメモリを ECCなしで本番運用するのとかないわー」という失笑気味の反応が [自作サーバ同窓会](http://atnd.org/events/47968) でも見られたのは事実なんだけど、そこは個人なんで、、ね(´ー｀; )

今年に入って、もう TDP は諦めてもよいという気になった。そうなると有力な選択肢としてあがってくるのが Xeon である。TDP 90W 以下の低電圧版の Xeon もコア数を諦めれば最近は魅力的なものが揃ってきている。E5 2600番台とかを見ると、[4コアで TDP 80W でありながら、3万円程度で手に入る魅力的なもの](http://ark.intel.com/ja/products/75787/Intel-Xeon-Processor-E5-2609-v2-10M-Cache-2_50-GHz) も存在している。これであれば、メモリが 32GB 以上載るマザーボードの選択肢はかなり広がる。Supermicro など、IPMI などが付いたマザーボードも選択肢に入り放題である。

ということで、散々続いた目移りは以下の構成で終焉を迎えつつある。

・ [Intel Xeon E5-2609 v2 (TDP 80W) 2.5GHz](http://ark.intel.com/ja/products/75787/Intel-Xeon-Processor-E5-2609-v2-10M-Cache-2_50-GHz)  
・ [Supermicro X9DRD-7LN4F](http://www.supermicro.com/products/motherboard/Xeon/C600/X9DRD-7LN4F.cfm)  
　- Support ECC and non-ECC UDIMMs ということで要求を満たす。  
　- GbE が 4port とか誰得なんでしょうね。  
　- IPMI はまぁ Supermicro ですしおすし。

誰得としか思えないマシンが出来上がりそうです。2014年の 2Q までには完成させたいところ(*´～｀)
